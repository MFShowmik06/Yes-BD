<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>YES BD - Seller Dashboard</title>
  <link rel="icon" href="https://www.google.com/s2/favicons?domain=yes.com" type="image/x-icon">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">

  <!-- Navbar -->
  <header class="bg-white shadow">
    <div class="max-w-7xl mx-auto p-4 flex justify-between items-center">
      <h1 class="text-2xl font-bold text-green-700 main-heading">YES BD</h1>
      <h2 class="text-xl font-bold text-green-700 sub-heading">Real Estate</h2>
      <nav class="space-x-4">
        <a href="/index.html" class="hover:text-green-600">Home</a>
        <a href="/logout" class="hover:text-green-600">Logout</a>
      </nav>
    </div>
  </header>

  <!-- Seller Dashboard -->
  <main class="max-w-7xl mx-auto py-12 px-4">
    <h2 class="text-3xl font-bold text-center text-green-800 mb-6">Seller Dashboard</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
      <a href="/add-property.html" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-6 rounded-lg shadow-md text-center text-xl">Add Property</a>
      <a href="/seller_messages.html" class="bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-6 rounded-lg shadow-md text-center text-xl">View Messages</a>
      <a href="/my_listings.html" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-4 px-6 rounded-lg shadow-md text-center text-xl">My Listings</a>
      <a href="/seller_profile.html" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-4 px-6 rounded-lg shadow-md text-center text-xl">Update Profile</a>
      <a href="/seller_booking_requests.html" class="bg-orange-500 hover:bg-orange-600 text-white font-bold py-4 px-6 rounded-lg shadow-md text-center text-xl">Booking Requests</a>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-white text-center py-4 shadow mt-8">
    <p class="text-gray-600">Â© 2025 YES BD. All rights reserved.</p>
  </footer>

  <!-- Notification Pop-up -->
  <div id="notification-popup" class="fixed bottom-4 right-4 bg-blue-600 text-white p-4 rounded-lg shadow-lg hidden z-50">
    <p id="notification-message" class="font-semibold"></p>
    <button class="absolute top-1 right-2 text-white text-lg" onclick="this.parentNode.style.display='none'">&times;</button>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const notificationPopup = document.getElementById('notification-popup');
      const notificationMessage = document.getElementById('notification-message');

      // Subscribe to SSE notifications
      const eventSource = new EventSource('/api/notifications/subscribe');

      eventSource.onmessage = function(event) {
        const data = JSON.parse(event.data);
        if (data.type === 'new_booking_request') {
          notificationMessage.textContent = `New booking request for property ID ${data.property_id} from buyer ${data.buyer_id}! Message: ${data.message}. Date: ${new Date(data.booking_date).toLocaleString()}`;
          notificationPopup.classList.remove('hidden');
          setTimeout(() => {
            notificationPopup.classList.add('hidden');
          }, 10000); // Hide after 10 seconds
        }
      };

      eventSource.onerror = function(err) {
        console.error('EventSource failed:', err);
        eventSource.close();
      };
    });
  </script>

</body>
</html>